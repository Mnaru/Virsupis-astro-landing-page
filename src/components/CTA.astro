---
interface Props {
  title?: string;
  info?: string;
}

const {
  title = "Nuo 2026m. balandžio",
  info = "Viršupio Sodų g. 2A   /   33 dvibučiai namai   /   79 - 162 m² namai   /   200 - 400 m² sklypai",
} = Astro.props;
---

<section class="cta-section">
  <div class="cta-content">
    <h2 class="cta-title">{title}</h2>
    <p class="cta-info">{info}</p>
  </div>
</section>

<style>
  .cta-section {
    position: relative;
    width: 100%;
    min-height: 600px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: var(--color-white, #f8f4ee);
  }

  .cta-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 24px;
    padding: 0 24px;
    text-align: center;
  }

  .cta-title {
    font-family: "General Sans", sans-serif;
    font-size: 53px;
    font-weight: 500;
    line-height: 1.1;
    color: var(--color-black, #161514);
    margin: 0;
    max-width: 650px;
  }

  .cta-info {
    font-family: "General Sans", sans-serif;
    font-size: 15px;
    font-weight: 500;
    line-height: 1.1;
    color: var(--color-black, #161514);
    margin: 0;
    max-width: 650px;
  }

  /* Initial states for staggered animation */
  .cta-title,
  .cta-info {
    opacity: 0;
  }

  /* Mobile responsive */
  @media (max-width: 768px) {
    .cta-section {
      min-height: 600px;
    }

    .cta-title {
      font-size: 32px;
    }

    .cta-info {
      font-size: 16px;
      line-height: 1.2;
      padding: 0 24px;
    }
  }
</style>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  const ctaSection = document.querySelector('.cta-section');
  const ctaTitle = document.querySelector('.cta-title');
  const ctaInfo = document.querySelector('.cta-info');

  if (ctaSection && ctaTitle && ctaInfo) {
    // Set initial states with y offset
    gsap.set(ctaTitle, { opacity: 0, y: 30 });
    gsap.set(ctaInfo, { opacity: 0, y: 20 });

    // Create sequenced timeline
    const tl = gsap.timeline({
      scrollTrigger: {
        trigger: ctaSection,
        start: 'top 85%',
        toggleActions: 'play none none none',
      }
    });

    // Title: elegant slide-up
    tl.to(ctaTitle, {
      opacity: 1,
      y: 0,
      duration: 1,
      ease: 'power3.out',
    });

    // Info: follows title
    tl.to(ctaInfo, {
      opacity: 1,
      y: 0,
      duration: 0.8,
      ease: 'power3.out',
    }, '-=0.7');
  }
</script>
